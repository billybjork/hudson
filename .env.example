# Hudson Environment Configuration
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ==============================================================================
# SUPABASE DATABASE
# ==============================================================================
# Get this from: Supabase Dashboard → Settings → Database → Connection String
# Format: postgresql://postgres:[password]@[project-ref].supabase.co:5432/postgres
DATABASE_URL=postgresql://postgres:YOUR_PASSWORD@your-project-ref.supabase.co:5432/postgres

# Database pool size (default: 10)
POOL_SIZE=10

# ==============================================================================
# SUPABASE API
# ==============================================================================
# Get these from: Supabase Dashboard → Settings → API

# Your project URL (e.g., https://abcdefghijk.supabase.co)
SUPABASE_URL=https://your-project-ref.supabase.co

# Anon/Public key (safe to expose in frontend)
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Service Role key (NEVER expose to frontend! Server-side only)
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ==============================================================================
# SUPABASE STORAGE
# ==============================================================================
# Public storage URL base for CDN access
# Format: https://[project-ref].supabase.co/storage/v1/object/public
SUPABASE_STORAGE_PUBLIC_URL=https://your-project-ref.supabase.co/storage/v1/object/public

# ==============================================================================
# TLS/SSL CERTIFICATE
# ==============================================================================
# Path to Supabase CA certificate bundle for secure connections
# Download from: Supabase Dashboard → Settings → Database → SSL Certificate
# Or use system certificates via :castore dependency
SUPABASE_CA_CERT=/absolute/path/to/supabase-ca-bundle.pem

# ==============================================================================
# AUTHENTICATION (MVP - Shared Secrets)
# ==============================================================================
# Generate secure random strings for each role
# These will be bcrypt-hashed on application start
#
# Generate secure passwords with:
#   openssl rand -base64 32
#
# Or in Elixir IEx:
#   :crypto.strong_rand_bytes(32) |> Base.encode64()

# Producer role: Can manage sessions and control live streams
PRODUCER_SHARED_SECRET=generate-a-secure-random-string-here

# Talent role: Read-only access during live sessions
TALENT_SHARED_SECRET=generate-a-secure-random-string-here

# Admin role: Full access to catalog and configuration
ADMIN_SHARED_SECRET=generate-a-secure-random-string-here

# ==============================================================================
# APPLICATION CONFIGURATION
# ==============================================================================
# Phoenix secret key base (generate with: mix phx.gen.secret)
SECRET_KEY_BASE=generate-with-mix-phx-gen-secret

# Application port (default: 4000)
PORT=4000

# Application host (for production)
PHX_HOST=localhost

# ==============================================================================
# OPTIONAL: DEVELOPMENT/PRODUCTION MODE
# ==============================================================================
# MIX_ENV=dev
# MIX_ENV=prod

# ==============================================================================
# SETUP INSTRUCTIONS
# ==============================================================================
# 1. Create a Supabase project at https://supabase.com
# 2. Copy this file to .env
# 3. Fill in all SUPABASE_* values from your Supabase dashboard
# 4. Generate secure secrets for PRODUCER/TALENT/ADMIN roles
# 5. Generate SECRET_KEY_BASE with: mix phx.gen.secret
# 6. Download CA certificate or ensure :castore is installed
# 7. Create 'products' storage bucket in Supabase
# 8. Configure RLS policies (see docs/implementation_guide.md §10.2)
# 9. Load variables: source .env (or use direnv)
# 10. Run migrations: mix ecto.migrate
# 11. Start server: mix phx.server
